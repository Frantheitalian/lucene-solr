<html>
	<head> 
		<title>Wikipedia - demo</title> 
	</head>
	<link rel="stylesheet" href="http://dexter.isti.cnr.it/static/bootstrap/css/bootstrap.css"/>
	<link rel="stylesheet" href="http://dexter.isti.cnr.it/static/bootstrap/css/bootstrap-theme.css"/>
	<link rel="stylesheet" href="http://dexter.isti.cnr.it/static/bootstrap/css/bootstrap-slider.css"/>
	<link rel="stylesheet" href="http://dexter.isti.cnr.it/static/bootstrap/css/bootstrap-glyphicons.css"/>
	<script src="http://dexter.isti.cnr.it/static/js/jquery.js" type="text/javascript"></script>
	<script src="http://dexter.isti.cnr.it/static/js/jquery.caret.js" type="text/javascript"></script>
	<script src="http://dexter.isti.cnr.it/static/bootstrap/js/bootstrap.js" type="text/javascript"></script>
	<script>
	$(document).on('keydown', function (event) {
			function log_relevance(rel){
				var xmlHttp = new XMLHttpRequest();
    				xmlHttp.open( "GET","/store?q={{query}}&rank={{rank}}&rel="+rel  , false );
    				xmlHttp.send(null);
				}	
			space=32
			enter=13
		        right=39
			left=37
						
			rel = event.which-48
			if (event.which == space) rel = 0
			if (rel >= 0 && rel <=4){
				console.log("logging relevance "+rel)
				log_relevance(rel)
				$("#relevance").text(rel);
			}
			if (event.which == left) window.location.replace("http://localhost:5000/annotate?q={{query}}&rank={{rank-1}}");
			
			if (event.which == right ||  event.which == enter) window.location.replace("http://localhost:5000/annotate?q={{query}}&rank={{rank+1}}");
			})
	</script>

<body>
<h1> Wikipedia demo </h1> 
<h2> Annotate result {{rank+1}} for query {{query}} </h2> 
<h2> Current Relevance: <span id='relevance'>{{rel}}</span> </h2>
<form> <input type="text" name="q">
	<input type="hidden" name="rank" value="0">
	<input type="submit" value="New query">
</form>
<h3> <a href='https://simple.wikipedia.org/wiki/{{ article['wikiTitle'] }}'>{{ article['title'] }}</a></h3>
<iframe src='https://simple.wikipedia.org/wiki/{{ article['wikiTitle'] }}' width=1500 height=1000></iframe>
</body>

</html>
